<!DOCTYPE html>
<html lang="en">
<head>
        <title>Vaseem's blog <small>Solr</small></title>
        <!-- Fonts -->
        <link href='http://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=The+Girl+Next+Door' rel='stylesheet' type='text/css'>
        <link href='http://fonts.googleapis.com/css?family=Marcellus' rel='stylesheet' type='text/css'>
        <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">


        <!-- CSS -->
        <link rel="stylesheet" href="../theme/css/main.css" type="text/css" />
        <link rel="stylesheet" href="../theme/css/pygments.css" type="text/css" />
        <link rel="stylesheet" href="../theme/css/font-awesome.css" type="text/css" />
        <meta charset="utf-8" />


        <!-- Javascript-->
        <script async src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
        <script async type="text/javascript">
        $(function() {
            function invisibleMenu() {
                var now = 0;
                var pixels = 300;
                var opacity = -1;

                var move = function() {
                    now = $(window).scrollTop();
                    if (now > pixels && opacity !== 0)
                        opacity = 0;
                    else if (now < pixels){
                        // Depends on the position not if scrolls down or up
                        opacity = (1 - now/pixels);
                    }
                    $("div.navigation").css({"opacity": opacity});
                }
                $(window).scroll(move);
                move();
            }
            invisibleMenu();
          });
          </script>
</head>

<body id="index" class="home">
     <div class="navigation">
        <ol class="nav">
          <li><a href="..">Blog</a> </li>
          <li><a href="../archives.html">Archive</a></li>
          <li class="current"><a href="../tags.html">Tags</a> </li>
          <li><a href="../">RSS</a> </li>
        </ol>
      </div>
        <header id="banner" class="body">
                <div class="banner"><a href="..">Vaseem's blog <strong></strong></a></div>
        </header><!-- /#banner -->
      <!--   <nav id="menu"><ul>
            <li><a href="/">Home</a></li>
            <li><a href="/pages/about.html">About Me</a></li>
            <li><a href="http://vaseem-khan.github.io">Profile</a></li>
            <li><a href="/category/posts.html">Posts</a></li>
            <li><a href="../category/posts.html">Posts</a></li>
        </ul></nav> -->
        <!-- /#menu -->
        <div class="social">
                        <a href="http://github.com/vaseem-khan"><i class="icon-github"></i>  </a>
                        <a href="https://twitter.com/vakhan93"><i class="icon-twitter"></i>  </a>
                        <a href="http://www.linkedin.com/in/vakhan93"><i class="icon-linkedin"></i>  </a>
                        <a href="mailto:vakhan93@gmail.com"><i class="icon-envelope"></i> </a>
                </div>
        <div class="box">
<section id="content">
<div class="posts">
    <ol id="post-list">
        <li>
            <article class="archive">
                <header>
                    <h1 class="archive-entry-title">
                        <a href="../solr-setup-101/" rel="bookmark" title="Permalink to Solr Setup 101">Solr Setup 101</a>
                    </h1>
                </header>
                <footer class="post-info">
                    <abbr>
                      Tue 23 December 2014 | <i class="fa fa-clock-o"></i> 2 min read
 |
                         By <a class="url fn" href="../author/vaseem-ahmed-khan.html">Vaseem Ahmed Khan</a>
                    </abbr>
                    <div class="entry-content"> <p>This is a simple django-haystack example that uses Solr as the backend. It is based on the official <a href="http://django-haystack.readthedocs.org/en/latest/tutorial.html">django-haystack tutorial</a>. Here, we’ll be adding <strong>search functionality to a simple note-taking application.</strong></p>
<h4><strong>Basic Setup:</strong></h4>
<ul>
<li>Django</li>
<li>django-haystack</li>
<li>pysolr</li>
</ul>
<p>Install the following using the commands:</p>
<div class="highlight"><pre><span class="nv">$ </span>pip install django
<span class="nv">$ </span>pip install django-haystack
<span class="nv">$ </span>pip install pysolr
</pre></div>


<h5><strong>Solr setup:</strong></h5>
<p>For haystack connections, i am using Solr as the backend so Solr needs to be setup.To run the Solr server, Java must be installed on your machine. If you don't have Java installed in your system, first install it using the steps below:</p>
<div class="highlight"><pre><span class="nv">$ </span>sudo add-apt-repository ppa:webupd8team/java
<span class="nv">$ </span>sudo apt-get update
<span class="nv">$ </span>sudo apt-get install oracle-java7-installer
<span class="nv">$ </span>sudo apt-get install oracle-java7-set-default
<span class="nv">$ </span>java -version
</pre></div>


<p>After installing java, download Solr from its <strong><a href="https://lucene.apache.org/solr/downloads.html">official site</a></strong> and extract it. I used Apache Solr 4.10.1. It is not necessary that it must reside in the project directory. Now after extracting it, go to the extracted folder in terminal.</p>
<div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd</span> &lt;extracted_folder_path&gt;/solr-4.10.1/example/
<span class="nv">$ </span>java -jar start.jar
</pre></div>


<p>This will start Solr server on port 8983. You can check if the Solr server has started by typing <a href="http://127.0.0.1:8983/solr/">http://127.0.0.1:8983/solr/</a> on your browser.</p>
<h4><strong>Running the project</strong></h4>
<ol>
<li>
<p><strong>Download</strong> and in the terminal, move into the project simple_django_haystack_solr_example.</p>
<div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd</span> &lt;your_project_path&gt;/simple_django_haystack_solr_example/
</pre></div>


</li>
<li>
<p><strong>Setup the database:</strong></p>
<p>I have used mysql as the database for the project. For that ,you will have to create a database in mysql using       its shell. You can use any name for your database but then change the database name  in your project's settings.py file accordingly.</p>
<div class="highlight"><pre>mysql&gt; create database solr_tutorial character set utf8
</pre></div>


<p>Now move into the simple_django_haystack_solr_example folder in your terminal.</p>
<div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd</span> &lt;your_project_path&gt;/simple_django_haystack_solr_example/
<span class="nv">$ </span>python manage.py syncdb
</pre></div>


<p>This will create all the database tables for our project.</p>
</li>
<li>
<p><strong>Generate the schema</strong></p>
<p>Solr’s configuration is XML-based, so we’ll need to manually regenerate the schema. Run the following command first from your project inside terminal, drop the XML output in your Solr’s schema.xml file and restart your Solr  server.</p>
<div class="highlight"><pre><span class="nv">$ </span>python manage.py build_solr_schema
</pre></div>


<p>Solr's xml file can be found at the following path:</p>
<div class="highlight"><pre>&lt;extracted_folder_path&gt;/solr-4.10.1/example/solr/collection1/conf/schema.xml
</pre></div>


<p>I have added my Solr conf file for schema.xml in case you get stuck here.</p>
</li>
<li>
<p><strong>Create some test data</strong> for creating the indexes.</p>
</li>
<li>
<p><strong>Start solr server:</strong></p>
<div class="highlight"><pre><span class="nv">$ </span>sudo java -jar start.jar
</pre></div>


</li>
<li>
<p><strong>Build solr index:</strong></p>
<div class="highlight"><pre><span class="nv">$ </span>python manage.py rebuild_index
</pre></div>


<p>By doing this, you’ll get some totals of how many models were processed and placed in the index.</p>
</li>
<li>
<p><strong>Run the Django development server:</strong></p>
<div class="highlight"><pre><span class="nv">$ </span>python manage.py runserver
</pre></div>


</li>
<li>
<p><strong>Go to search page:</strong>
    <a href="http://localhost:8000/search">http://localhost:8000/search</a></p>
</li>
</ol>
<p><a href="https://github.com/rahulgupta92">credits: Rahul Gupta</a></p>

                    <a href="../solr-setup-101/">Further <i class="fa fa-external-link"></i></a></div>
                </footer><!-- /.post-info -->
                <!-- /.entry-content -->
            </article>
        </li>
    </ol><!-- /#posts-list -->
</div>
<p class="paginator">
    Page 1 / 1
</p>
</section><!-- /#content -->
            <hr/>
            <footer id="contentinfo" class="footer">
                <div>
                    <a href="../pages/about">Vaseem Ahmed Khan</a>
                </div>
                <div>
                    powered by <a href="http://getpelican.com/">Pelican</a>
                    and <a href="http://python.org">Python</a>.
                    <a href="http://github.com/slok/iris">Theme</a>
                </div>
                <div>
                    Social icons (font awesome) by <a href="http://fortawesome.github.com/Font-Awesome/"> fort awesome</a>.
                </div>

            </footer><!-- /#contentinfo -->
        </div>
        <!--Add statistycs-->

</body>
</html>