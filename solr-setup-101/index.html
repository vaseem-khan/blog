<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Solr Setup 101</title>
  <meta name="author" content="Vaseem Ahmed Khan">



  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="../favicon.png" rel="icon">
  <link href="../theme/css/main.css" media="screen, projection"
        rel="stylesheet" type="text/css">
  <script src="../theme/js/modernizr-2.0.js"></script>
  <script src="../theme/js/ender.js"></script>
  <script src="../theme/js/octopress.js" type="text/javascript"></script>
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic"
        rel="stylesheet" type="text/css">
</head>

<body>
  <header role="banner"><hgroup>
  <h1><a href="../">Vaseem's blog</a></h1>
</hgroup></header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
</ul>



<ul class="main-navigation">
    <li><a href="/">Home</a></li>
    <li><a href="/pages/about.html">About Me</a></li>
    <li><a href="http://vaseem-khan.github.io">Profile</a></li>
    <li><a href="/category/posts.html">Posts</a></li>
</ul></nav>
  <div id="main">
    <div id="content">
<div>
  <article class="hentry" role="article">
<header>
      <h1 class="entry-title">Solr Setup 101</h1>
      <p class="meta"><time datetime="2014-12-23T13:59:33+05:30" pubdate>Tue 23 December 2014 </time>
<i class="fa fa-clock-o"></i> 2 min read
</p>
</header>

  <div class="entry-content"><p>This is a simple django-haystack example that uses Solr as the backend. It is based on the official <a href="http://django-haystack.readthedocs.org/en/latest/tutorial.html">django-haystack tutorial</a>. Here, we’ll be adding <strong>search functionality to a simple note-taking application.</strong></p>
<h4><strong>Basic Setup:</strong></h4>
<ul>
<li>Django</li>
<li>django-haystack</li>
<li>pysolr</li>
</ul>
<p>Install the following using the commands:</p>
<div class="highlight"><pre><span class="nv">$ </span>pip install django
<span class="nv">$ </span>pip install django-haystack
<span class="nv">$ </span>pip install pysolr
</pre></div>


<h5><strong>Solr setup:</strong></h5>
<p>For haystack connections, i am using Solr as the backend so Solr needs to be setup.To run the Solr server, Java must be installed on your machine. If you don't have Java installed in your system, first install it using the steps below:</p>
<div class="highlight"><pre><span class="nv">$ </span>sudo add-apt-repository ppa:webupd8team/java
<span class="nv">$ </span>sudo apt-get update
<span class="nv">$ </span>sudo apt-get install oracle-java7-installer
<span class="nv">$ </span>sudo apt-get install oracle-java7-set-default
<span class="nv">$ </span>java -version
</pre></div>


<p>After installing java, download Solr from its <strong><a href="https://lucene.apache.org/solr/downloads.html">official site</a></strong> and extract it. I used Apache Solr 4.10.1. It is not necessary that it must reside in the project directory. Now after extracting it, go to the extracted folder in terminal.</p>
<div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd</span> &lt;extracted_folder_path&gt;/solr-4.10.1/example/
<span class="nv">$ </span>java -jar start.jar
</pre></div>


<p>This will start Solr server on port 8983. You can check if the Solr server has started by typing <a href="http://127.0.0.1:8983/solr/">http://127.0.0.1:8983/solr/</a> on your browser.</p>
<h4><strong>Running the project</strong></h4>
<ol>
<li>
<p><strong>Download</strong> and in the terminal, move into the project simple_django_haystack_solr_example.</p>
<div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd</span> &lt;your_project_path&gt;/simple_django_haystack_solr_example/
</pre></div>


</li>
<li>
<p><strong>Setup the database:</strong></p>
<p>I have used mysql as the database for the project. For that ,you will have to create a database in mysql using       its shell. You can use any name for your database but then change the database name  in your project's settings.py file accordingly.</p>
<div class="highlight"><pre>mysql&gt; create database solr_tutorial character set utf8
</pre></div>


<p>Now move into the simple_django_haystack_solr_example folder in your terminal.</p>
<div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd</span> &lt;your_project_path&gt;/simple_django_haystack_solr_example/
<span class="nv">$ </span>python manage.py syncdb
</pre></div>


<p>This will create all the database tables for our project.</p>
</li>
<li>
<p><strong>Generate the schema</strong></p>
<p>Solr’s configuration is XML-based, so we’ll need to manually regenerate the schema. Run the following command first from your project inside terminal, drop the XML output in your Solr’s schema.xml file and restart your Solr  server.</p>
<div class="highlight"><pre><span class="nv">$ </span>python manage.py build_solr_schema
</pre></div>


<p>Solr's xml file can be found at the following path:</p>
<div class="highlight"><pre>&lt;extracted_folder_path&gt;/solr-4.10.1/example/solr/collection1/conf/schema.xml
</pre></div>


<p>I have added my Solr conf file for schema.xml in case you get stuck here.</p>
</li>
<li>
<p><strong>Create some test data</strong> for creating the indexes.</p>
</li>
<li>
<p><strong>Start solr server:</strong></p>
<div class="highlight"><pre><span class="nv">$ </span>sudo java -jar start.jar
</pre></div>


</li>
<li>
<p><strong>Build solr index:</strong></p>
<div class="highlight"><pre><span class="nv">$ </span>python manage.py rebuild_index
</pre></div>


<p>By doing this, you’ll get some totals of how many models were processed and placed in the index.</p>
</li>
<li>
<p><strong>Run the Django development server:</strong></p>
<div class="highlight"><pre><span class="nv">$ </span>python manage.py runserver
</pre></div>


</li>
<li>
<p><strong>Go to search page:</strong>
    <a href="http://localhost:8000/search">http://localhost:8000/search</a></p>
</li>
</ol>
<p><a href="https://github.com/rahulgupta92">credits: Rahul Gupta</a></p></div>
    <footer>
<p class="meta">
  <span class="byline author vcard">
    Posted by <span class="fn">Vaseem Ahmed Khan</span>
  </span>
<time datetime="2014-12-23T13:59:33+05:30" pubdate>Tue 23 December 2014 </time>
<i class="fa fa-clock-o"></i> 2 min read
  <span class="categories">
    <a class="category" href="../tag/solr.html">Solr</a>
  </span>
</p><div class="sharing">
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="../solr-setup-101/" data-via="vakhan93" data-counturl="../solr-setup-101/" >Tweet</a>
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
</div>    </footer>
  </article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div>
  </section>
</div>
<aside class="sidebar">
  <section>
    <h1>Recent Posts</h1>
    <ul id="recent_posts">
      <li class="post">
          <a href="../how-to-set-up-virtualenv-batteries-included/">How to set-up virtualenv</a>
      </li>
      <li class="post">
          <a href="../untrack-files-from-git/">Untrack Files From Git</a>
      </li>
      <li class="post">
          <a href="../solr-setup-101/">Solr Setup 101</a>
      </li>
      <li class="post">
          <a href="../nzec-go-away/">NZEC go away</a>
      </li>
      <li class="post">
          <a href="../my-first-post/">Caio</a>
      </li>
    </ul>
  </section>
  <section>
      
    <h1>Categories</h1>
    <ul id="recent_posts">
        <li><a href="../category/posts.html">Posts</a></li>
    </ul>
  </section>
 

  <section>
  <h1>Tags</h1>
    <a href="../tag/virtualenv.html">Virtualenv</a>,    <a href="../tag/pelican.html">pelican</a>,    <a href="../tag/git.html">Git</a>,    <a href="../tag/python.html">Python</a>,    <a href="../tag/spoj.html">spoj</a>,    <a href="../tag/solr.html">Solr</a>,    <a href="../tag/codechef.html">codechef</a>  </section>


    <section>
        <h1>Social</h1>
        <ul>
            <li><a href="http://github.com/vaseem-khan" target="_blank">github</a></li>
            <li><a href="https://twitter.com/vakhan93" target="_blank">twitter</a></li>
            <li><a href="http://www.linkedin.com/in/vakhan93" target="_blank">linkedin</a></li>
        </ul>
    </section>

<section>
    <a href="http://twitter.com/vakhan93" class="twitter-follow-button" data-show-count="true">Follow @vakhan93</a>
</section>
</aside>    </div>
  </div>
  <footer role="contentinfo"><p>
    Copyright &copy;  2014-2015  - Vaseem Ahmed Khan -
  <span class="credit">Powered by <a href="http://getpelican.com">Pelican</a></span>
</p></footer>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-57865970-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();

    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-57865970-1');
    ga('send', 'pageview');
</script>
	<script type="text/javascript">
	  var disqus_shortname = 'vaseem-blog';
          var disqus_identifier = '/solr-setup-101/';
          var disqus_url = '../solr-setup-101/';
          var disqus_title = 'Solr Setup 101';
	  (function() {
	    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	    dsq.src = "//" + disqus_shortname + '.disqus.com/embed.js';
	    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	   })();
	</script>
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
</body>
</html>